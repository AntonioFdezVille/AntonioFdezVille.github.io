/* --- ESTILOS GENERALES Y DE FORMULARIO --- */
body { background-color: #f0f2f5; font-family: 'Roboto', sans-serif; margin: 0; color: #333; }
.main-container { display: flex; flex-wrap: wrap; min-height: 100vh; }
.form-container { width: 50%; padding: 2rem 3rem; background-color: #fff; box-sizing: border-box; display: flex; flex-direction: column; }
.form-header .back-button { text-decoration: none; color: #007bff; font-weight: bold; display: inline-block; margin-bottom: 1.5rem; }
fieldset { border: 1px solid #ddd; border-radius: 8px; margin-bottom: 1.5rem; padding: 1.5rem; }
legend { font-weight: bold; color: #555; padding: 0 0.5rem; }
.form-grid { display: grid; gap: 1rem; }
.two-columns { grid-template-columns: 1fr 1fr; }
.input-group { display: flex; flex-direction: column; }
.input-group.full-width { grid-column: 1 / -1; }
.input-group label { margin-bottom: 0.5rem; font-weight: 500; color: #555; }
.input-group input, .input-group textarea, .input-group select { padding: 0.75rem; border: 1px solid #ccc; border-radius: 5px; font-size: 1rem; }
.form-table { width: 100%; border-collapse: collapse; }
.form-table th, .form-table td { padding: 0.5rem; text-align: left; vertical-align: middle; }
.form-table input { width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; }
.form-table input.importe { background-color: #f4f4f4; border: none; font-weight: bold; }
.remove-row-btn { background: none; border: none; color: red; font-size: 1.5rem; cursor: pointer; }
.add-row-button { margin-top: 1rem; border: 1px dashed #007bff; background: #f0f8ff; color: #007bff; padding: 0.75rem; width: 100%; font-weight: bold; cursor: pointer; }
.action-buttons { padding-top: 1.5rem; border-top: 1px solid #eee; display: flex; gap: 1rem; justify-content: flex-end; }
.action-buttons button { padding: 0.8rem 1.5rem; font-size: 1rem; font-weight: bold; border-radius: 8px; border: none; cursor: pointer; }
#imprimir-btn { background-color: #007bff; color: white; }
#descargar-btn { background-color: #28a745; color: white; }

/* --- SECCIÓN DE PREVISUALIZACIÓN DE FACTURA --- */
.preview-container { width: 50%; padding: 2rem; box-sizing: border-box; display: flex; justify-content: center; align-items: flex-start; background-color: #e0e0e0; }
#pdf-content { width: 210mm; min-height: 297mm; background-color: white; box-shadow: 0 0 15px rgba(0,0,0,0.15); padding: 15mm; box-sizing: border-box; font-size: 11pt; color: #333; display: flex; flex-direction: column; }
.pdf-header { display: flex; justify-content: space-between; padding-bottom: 1rem; border-bottom: 2px solid #007bff; }
.sender-details h2 { margin: 0; color: #007bff; }
.sender-details p { margin: 2px 0; font-size: 10pt; }
.factura-title { text-align: right; }
.factura-title h1 { margin: 0; color: #333; }
.factura-title p { margin: 5px 0; }
.pdf-client { padding: 1.5rem 0; }
.pdf-client h3 { margin: 0 0 0.5rem; }
.pdf-client p { margin: 3px 0; }
.pdf-items-table { width: 100%; border-collapse: collapse; flex-grow: 1; }
.pdf-items-table thead tr { background-color: #007bff; color: white; }
.pdf-items-table th { padding: 0.75rem; text-align: left; }
.pdf-items-table th:last-child, .pdf-items-table td:last-child { text-align: right; }
.pdf-items-table td { padding: 0.75rem; border-bottom: 1px solid #ddd; }
.pdf-footer { display: flex; justify-content: space-between; padding-top: 1.5rem; border-top: 2px solid #007bff; }
.payment-details { width: 50%; font-size: 9pt; }
.payment-details h3 { margin: 0 0 0.5rem; }
.payment-details p { margin: 3px 0; }
.footer-legal-text { color: #888; margin-top: 1rem; }
.totals-container { width: 40%; }
.totals-row { display: flex; justify-content: space-between; padding: 0.5rem 0; }
.totals-row span:last-child { font-weight: bold; }
.totals-row.grand-total { font-size: 1.5em; font-weight: bold; color: #007bff; border-top: 2px solid #333; margin-top: 0.5rem; }

/* --- Estilos responsive, modal e impresión (adaptados) --- */
.mobile-preview-button{display:none;position:fixed;bottom:6rem;right:20px;background-color:#007bff;color:#fff;border:none;border-radius:50px;width:150px;padding:15px;font-size:1rem;font-weight:700;box-shadow:0 4px 10px rgba(0,0,0,.3);z-index:1000;cursor:pointer}
.modal-overlay{display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:rgba(0,0,0,.7);z-index:2000;justify-content:center;align-items:center}
.modal-overlay.active{display:flex}
.modal-content{position:relative;width:95vw;height:90vh;overflow-y:auto}
.modal-close-button{position:absolute;top:-10px;right:-10px;background-color:#fff;border:2px solid #000;border-radius:50%;width:40px;height:40px;font-size:1.5rem;font-weight:700;cursor:pointer;z-index:2001}
#modal-pdf-content>div{transform:scale(.5);transform-origin:top center}
@media print{ .form-container, .mobile-preview-button, .modal-overlay{display:none!important} body, .main-container{padding:0;margin:0} .preview-container{display:block!important;width:100%;padding:0;margin:0;background:none} #pdf-content{box-shadow:none;border:none;margin:0 auto;padding:10mm;transform:scale(1)!important} .pdf-items-table thead tr{background-color:#007bff!important;-webkit-print-color-adjust:exact;print-color-adjust:exact} }
@media (max-width:1200px){ .main-container{flex-direction:column} .form-container{width:100%;order:2} .preview-container{display:none} .mobile-preview-button{display:block} .action-buttons{position:sticky;bottom:0;background:#fff;padding:1rem;margin:0 -3rem -2rem;z-index:999;box-shadow:0 -2px 10px rgba(0,0,0,.1)} }
@media (max-width:768px){ .form-container{padding:1.5rem} .two-columns{grid-template-columns:1fr} .input-group.full-width{grid-column:1} .action-buttons{margin:0 -1.5rem -1.5rem} .form-table thead{display:none} .form-table tr{display:block;border:1px solid #ddd;border-radius:8px;margin-bottom:1.5rem;padding:1rem} .form-table td{display:flex;justify-content:space-between;align-items:center;padding:.7rem 0;border-bottom:1px solid #f0f0f0} .form-table tr td:last-child{border-bottom:none} .form-table td[data-label]::before{content:attr(data-label);font-weight:500;padding-right:1rem} .form-table td[data-label=Quitar]{justify-content:center;padding-top:1rem} .form-table td[data-label=Quitar]::before{content:""} .form-table input{width:60%;text-align:right} }